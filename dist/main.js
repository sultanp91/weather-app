(()=>{const e=document.querySelector("#cityinput"),t=document.querySelector("#submit"),n=document.querySelector("#location-logo"),o=document.querySelector("#toggle"),c=document.querySelector("#temp"),i=(document.querySelector("#tempfeel"),document.querySelector("#condition")),a=document.querySelector("#city"),r=document.querySelector("#icon");let l={},s=!0,d=!1;const u=()=>{!0===s?(c.textContent=`${l.getTempCelsius}  째C`,tempfeel.textContent=`${l.getTempFeelCelsius} 째C`,i.textContent=l.condition,a.textContent=l.city,r.src=`http://openweathermap.org/img/wn/${l.icon}@2x.png`):!0===d&&(c.textContent=`${l.getTempFahrenheit}  째F`,tempfeel.textContent=`${l.getTempFeelFahrenheit} 째F`,i.textContent=l.condition,a.textContent=l.city,r.src=`http://openweathermap.org/img/wn/${l.icon}@2x.png`)};async function m(e){try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&appid=d814b06e7180432ffac829ff0f153fb9`,{mode:"cors"}),n=await t.json();l=await((e,t,n,o,c)=>({getTempCelsius:Math.round(e),getTempFeelCelsius:Math.round(t),getTempFahrenheit:Math.round(1.8*e+32),getTempFeelFahrenheit:Math.round(1.8*t+32),condition:n,icon:o,city:c}))(n.main.temp,n.main.feels_like,n.weather[0].main,n.weather[0].icon,n.name)}catch(e){console.log(e)}}t.addEventListener("click",(async t=>{t.preventDefault();const n=e.value;await m(n),u()}));const p=async function(){navigator.geolocation.getCurrentPosition((async function(e){const t=e.coords,{latitude:n}=t,{longitude:o}=t;try{const e=await fetch(`https://eu1.locationiq.com/v1/reverse.php?key=pk.74f454060c7a9f8b245dd7bf24c08d88&lat=${n}&lon=${o}&format=json`),t=await e.json();await m(t.address.city)}catch(e){console.log(e)}u()}))};window.addEventListener("load",p),n.addEventListener("click",p),o.addEventListener("click",(e=>{e.preventDefault(),!0===s?(s=!1,d=!0,u()):!0===d&&(d=!1,s=!0,u())}))})();